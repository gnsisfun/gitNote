<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-68e6b0f4-3633-483a-a0c1-b1b58969dce7"></attachment><h3>scratch3.0 几个核心库介绍</h3><h3><br></h3><h3><a href="https://github.com/LLK/scratch-gui" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">scratch-gui</a></h3><p>由 React 组件实现的的 UI 界面</p><p><a href="https://github.com/Micircle/scratch3.0-note/blob/master/scratch3.0.png" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);"><img src="https://github.com/Micircle/scratch3.0-note/raw/master/scratch3.0.png"></a></p><p>大概布局和功能</p><p><br></p><ul><li>菜单：</li><li class="ql-indent-1">多语言切换</li><li class="ql-indent-1">项目导出和导入（<em>支持导入scatch2的项目</em>）</li><li class="ql-indent-1">切换加速模式（<em>加速模式会木块执行更快，因为它不会等待角色渲染</em>）</li><li class="ql-indent-1">教程</li><li class="ql-indent-1">编辑项目名称</li><li class="ql-indent-1">查看社区</li><li class="ql-indent-1">注册（登陆后是查看我的项目列表）</li><li class="ql-indent-1">登陆（登陆后是用户信息）</li><li>工作区</li><li class="ql-indent-1">代码：使用积木块操作舞台角色</li><li class="ql-indent-1">造型：添加或编辑角色的造型图片，支持上传svg、png、jpg等图片，以及摄像头</li><li class="ql-indent-1">声音：添加或编辑角色的声音，支持上传mp3、wav的声音，以及录音</li><li class="ql-indent-1">扩展：可以添加额外的积木分类，目前开放的有：音乐、画笔、谷歌翻译、视频侦测等</li><li>舞台区</li><li class="ql-indent-1">绿旗：触发运行工作区中的绿旗积木块</li><li class="ql-indent-1">停止：停止所有运行中的积木（<em>如果你用了【当响度&gt;10】这样的事件块时，停止后会可能会被再次触发</em>）</li><li class="ql-indent-1">放大、缩小、全屏：调整舞台大小</li><li class="ql-indent-1">舞台：使用 webgl 渲染背景、角色</li><li class="ql-indent-1">其他：显示勾选的变量、列表、侦测值，问答交互</li><li>角色区：</li><li class="ql-indent-1">显示、设置角色的信息：角色名、坐标、显示隐藏、大小、方向</li><li>添加到舞台的角色列表：</li><li class="ql-indent-2">调整顺序</li><li class="ql-indent-2">删除角色</li><li class="ql-indent-2">复制角色</li><li class="ql-indent-2">导出角色（会将角色的声音、造型、积木一起导出为一个 .sprite3 文件）</li><li class="ql-indent-1">将积木、声音、造型拖拽分享到其他角色</li><li class="ql-indent-1">添加角色和背景：支持上传图片和 .sprite3 文件</li></ul><h3><br></h3><h3><a href="https://github.com/LLK/scratch-blocks" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">scratch-blocks</a></h3><p>Scratch Blocks 是基于谷歌&nbsp;<a href="https://github.com/google/blockly" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">Blockly</a>&nbsp;开发的一个图形化 js 库，用积木块的形式来实现编程。</p><p>这里 Scratch Blocks 抛弃了 Blockly 中积木块转 Python 等编程语言的功能（Blockly中Generator 的部分），通过抛事件的方式搭配 Scratch VM 来实现控制舞台渲染。</p><p><br></p><h3><br></h3><h3><a href="https://github.com/LLK/scratch-vm" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">scratch-vm</a></h3><p>Scratch VM 是一个运行 Scratch Blocks 代码块的引擎库。主要有以下功能：</p><p><br></p><ul><li>加载解析项目：通过 Scratch GUI 导入一个 .sb2、.sb3 的项目文件，解析项目文件，加载项目中用到的图片和声音，将项目角色渲染到舞台上，将项目中用到的积木块渲染到代码工作区。</li><li>导出项目：将当前项目中的角色图片、声音、积木等项目信息和资源打包压缩成 .sb3 文件</li><li>解析运行积木：</li><li class="ql-indent-1">定义每种类型积木执行时的方法</li><li class="ql-indent-1">通过监听代码工作区的事件，保存当前角色代码工作区对应的积木代码信息</li><li class="ql-indent-1">角色切换时，根据这些积木信息将该角色的积木块还原到工作区</li><li class="ql-indent-1">不断检测代码块的状态，在代码块被触发运行时，解析代码块信息，执行代码块对应的方法，更新舞台角色状态</li><li>扩展管理：扩展被添加时，解析扩展数据，更新 Scratch Blocks 的 toolbox ，添加新的分类和积木</li><li>调用 Scratch Render 提供的渲染接口，更新舞台</li></ul><h3><br></h3><h3><a href="https://github.com/LLK/scratch-render" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">scratch-render</a></h3><p>Scratch Render 是基于 webgl 的一个渲染引擎，主要用到了 twgl 库，定义了供 Scratch VM 调用的接口。 主要功能： + 根据 svg、png 的数据在 canvas 中渲染成图形 + 更新角色图层的信息：大小、位置、角度、图层优先级、图形特效等 + 画笔图层</p><p><br></p><h3><br></h3><h3><a href="https://github.com/LLK/scratch-audio" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">scratch-audio</a></h3><p>Scratch Audio 是用来解析声音、播放声音的库。</p><p><br></p><h3><br></h3><h3><a href="https://github.com/LLK/scratch-link" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">scratch-link</a></h3><p>Scratch Link 通过 WebSocket 使 Scratch 硬件扩展可以和硬件设备通讯。</p><p>想知道怎么用 nodejs 实现，可以查看&nbsp;<a href="https://github.com/Micircle/scratch-node-link%E3%80%82" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">https://github.com/Micircle/scratch-node-link。</a></p><p><br></p><h3><br></h3><h3>其他仓库</h3><p><a href="https://github.com/LLK/scratch-paint" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">scratch-paint</a>：GUI 中造型编辑的组件，用到了 paper.js，目前处理带有 text 标签的 svg 文件时会有 bug，在 windows 环境中容易崩溃。</p><p><a href="https://github.com/LLK/scratch-svg-render" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">scratch-svg-render</a>：scratch 处理 svg 资源的一个工具库，处理带有 text 标签的 svg 文件时会有 bug。</p><p><a href="https://github.com/LLK/scratch-i10n" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">scratch-i10n</a>：scratch 多语言库，包含了Scratch GUI 和 Scratch Blocks 中用到的翻译信息。</p><p><br></p><h3><br></h3><h3>笔记目录</h3><ul><li><a href="https://github.com/Micircle/scratch3.0-note/blob/master/scratch-gui/index.md" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">Scratch Gui</a></li><li><a href="https://github.com/Micircle/scratch3.0-note/blob/master/scratch-blocks/index.md" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">Scratch Blocks</a></li><li><a href="https://github.com/Micircle/scratch-node-link" target="_blank" style="background-color: initial; color: rgb(3, 102, 214);">以 microbit 扩展为例，了解 Scratch 硬件通讯流程</a></li></ul><p><em>喜欢的话请点击一下右上角的 Star 吧，谢谢~</em></p><p><br></p>